{% extends "base.html" %}

{% block title %}View - Surveys{% endblock %}

{% block content %}
{{ block.super }}
{% include "survey/chart_js.html" %}
<!--The following site provided a Django project blueprint to build a survey app. This was
followed alongside the git hub page. I then customised the HTML and CSS to align with my
site's design and functionality. https://mattsegal.dev/django-survey-project.html. Once the survey
has been completed, a thank you message is displayed and the user can return to the home page.
The chart-js library was utilised to return the charts for the default questions-->
<div class="container mt-5">

	<div class="row">

		<div class="col-md-12 text-center">

			<h1 class="card-title bolder">{{ survey.title }}</h1>

			<h3 class="card-title">You have {{ num_submissions }} submissions</h3>

			<h3 class="card-title"><a class="btn mb-3 mr-1 get-started" role="button" href="{{ public_url }}"
					alt="Click this button to start the survey">Start

					Survey</a></h3>

			<h1 class="card-title bolder dividing">Answers</h1>
            <div class="row">
                <div class="col-sm text-center mt-5 mb-5">
                    <h2 class="card bolder">
                        % per Age Range:
                    </h2>
                    <canvas class="myChart2 chart-size" width="400" height="100"></canvas>
                </div>
                <div class="col-sm text-center mt-5 mb-5">
                    <h2 class="card bolder">
                        % per Gender:
				    </h2>
				   <canvas class="myChart chart-size" width="400" height="100"></canvas>
                </div>
                <div class="col-sm text-center mt-5 mb-5"><h2 class="card bolder">
					% per Industry:
				   </h2>
				   <canvas class="myChart3 chart-size" width="400" height="100"></canvas>
                 </div>
                <div class="col-sm text-center mt-5 mb-5">
                    {% for question in questions %}
                    <h2 class="card bolder">
                        Question {{ forloop.counter }} / {{ questions|length }}: {{ question.question }}
                    </h2>
                    <ul>
                        {% for option in question.option_set.all %}
                        <li>
                            {{ forloop.counter }}) {{option.option}}: {{ option.percent|floatformat }}%
                        </li>
    
                        {% endfor %}
                    </ul>
                    {% endfor %}
                </div>

			<div><a class="btn mb-3 mr-1 get-started" href="{% url 'survey-list' %}" type="button">
                Return</a>

			</div>
		</div>
	</div>
</div>

{% endblock %}
